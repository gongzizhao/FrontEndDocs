1. 域名系统

   用户与因特网上某台主机通信时，更易使用主机名字。但是，机器在处理IP数据报时，并不是使用域名而是使用IP地址。这是因为IP地址长度固定，而域名的长度不固定，机器处理起来比较困难。

   域名到IP地址的解析是由分布在因特网上的许多域名服务器程序共同完成的。域名服务器程序在专设的结点上运行，而人们也常把运行域名服务器程序的机器称为域名服务器。

2. 域名服务器

   根域名服务器：最高层次的域名服务器，也是最重要的域名服务器。所有的根域名服务器都知道所有的顶级域名服务器的域名和IP地址。不管是哪一个本地域名服务器，若要对因特网上任何一个域名进行解析，只要自己无法解析，就首先求助根域名服务器。所以根域名服务器是最重要的域名服务器。假定所有的根域名服务器都瘫痪了，那么整个DNS系统就无法工作。需要注意的是，在很多情况下，根域名服务器并不直接把待查询的域名直接解析出IP地址，而是告诉本地域名服务器下一步应当找哪一个顶级域名服务器进行查询。

   顶级域名服务器：负责管理在该顶级域名服务器注册的二级域名。

   权限域名服务器：负责一个“区”的域名服务器。

   本地域名服务器：本地服务器不属于下图的域名服务器的层次结构，但是它对域名系统非常重要。当一个主机发出DNS查询请求时，这个查询请求报文就发送给本地域名服务器。

3. 域名解析过程

   1. 主机向本地域名服务器的查询一般都是采用递归查询。若本地域名服务器不知道被查询的IP地址，那么其就向其他根域名服务器继续发出查询请求报文。递归查询返回的查询结果或者是所要查询的IP地址，或者是报错，表示无法查询到所需的IP地址。

   2. 本地域名服务器向根域名服务器的查询是迭代查询。当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的IP地址，要么告诉本地服务器：“你下一步应当向哪一个域名服务器进行查询”。根域名服务器->顶级域名服务器->权限域名服务器->正确IP或者报错。

   3. 举例

      假定域名为m.xyz.com的主机想知道另一个主机y.abc.com的IP地址。例如，主机m.xyz.com打算发送邮件给y.abc.com。这时就必须知道主机y.abc.com的IP地址。下面是上图a的几个查询步骤：

      1、主机m.abc.com先向本地服务器dns.xyz.com进行递归查询。

      2、本地服务器采用迭代查询。它先向一个根域名服务器查询。

      3、根域名服务器告诉本地服务器，下一次应查询的顶级域名服务器dns.com的IP地址。

      4、本地域名服务器向顶级域名服务器dns.com进行查询。

      5、顶级域名服务器dns.com告诉本地域名服务器，下一步应查询的权限服务器dns.abc.com的IP地址。

      6、本地域名服务器向权限域名服务器dns.abc.com进行查询。

      7、权限域名服务器dns.abc.com告诉本地域名服务器，所查询的主机的IP地址。

      8、本地域名服务器最后把查询结果告诉m.xyz.com。

      整个查询过程共用到了8个UDP报文。

      为了提高DNS查询效率，并减轻服务器的负荷和减少因特网上的DNS查询报文数量，在域名服务器中广泛使用了高速缓存，用来存放最近查询过的域名以及从何处获得域名映射信息的记录。

      许多主机在启动时从本地服务器下载名字和地址的全部数据库，维护存放自己最近使用的域名的高速缓存，并且只在从缓存中找不到名字时才使用域名服务器。维护本地域名服务器数据库的主机应当定期地检查域名服务器以获取新的映射信息，而且主机必须从缓存中删除无效的项。由于域名改动并不频繁，大多数网点不需花精力就能维护数据库的一致性。